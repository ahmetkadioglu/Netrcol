<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= user.username %> | Next Gen Discord Bot</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary: #6366f1;
            --secondary: #a855f7;
            --accent: #ec4899;
            --success: #10b981;
            --bg: #030014;
            --card-bg: rgba(255, 255, 255, 0.03);
            --border: rgba(255, 255, 255, 0.1);
            --text: #ffffff;
            --text-muted: #94a3b8;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; }

        html, body { width: 100%; height: 100%; overflow-x: hidden; }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Outfit', sans-serif;
            display: flex; flex-direction: column; min-height: 100vh; position: relative;
        }

        /* --- BACKGROUND FX --- */
        #particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
        .blob { position: fixed; width: 600px; height: 600px; border-radius: 50%; filter: blur(120px); opacity: 0.3; z-index: -2; pointer-events: none; }
        .blob-1 { top: -200px; left: -200px; background: var(--primary); animation: floatBlob 15s infinite alternate; }
        .blob-2 { bottom: -200px; right: -200px; background: var(--secondary); animation: floatBlob 20s infinite alternate-reverse; }
        .blob-3 { top: 40%; left: 40%; width: 400px; height: 400px; background: var(--accent); opacity: 0.15; animation: pulse 10s infinite; }

        /* --- NAVBAR --- */
        nav {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            padding: 15px 5%; width: 100%; position: fixed; top: 0;
            backdrop-filter: blur(20px); background: rgba(3, 0, 20, 0.6);
            border-bottom: 1px solid var(--border);
            z-index: 1000;
            transition: 0.3s;
        }
        
        .logo { font-size: 1.5rem; font-weight: 800; color: #fff; display: flex; align-items: center; gap: 12px; text-decoration: none; z-index: 1002; justify-self: start; }
        .logo img { width: 45px; height: 45px; border-radius: 50%; border: 2px solid var(--primary); box-shadow: 0 0 15px var(--primary); }
        
        .nav-center {
            display: flex;
            gap: 5px; background: rgba(255,255,255,0.05); padding: 5px; 
            border-radius: 50px; border: 1px solid var(--border); z-index: 1002;
            justify-self: center;
        }
        .nav-link { color: var(--text-muted); text-decoration: none; font-weight: 600; padding: 8px 20px; border-radius: 30px; transition: 0.3s; font-size: 0.95rem; white-space: nowrap; }
        .nav-link:hover { color: white; background: rgba(255,255,255,0.1); }
        .nav-link.active { background: var(--primary); color: white; box-shadow: 0 0 15px rgba(99, 102, 241, 0.4); }

        .nav-actions { display: flex; gap: 15px; align-items: center; z-index: 1002; justify-self: end; }
        .btn-vote { color: var(--text); text-decoration: none; font-weight: 600; display: flex; align-items: center; gap: 8px; transition: 0.3s; font-size: 0.95rem; white-space: nowrap; }
        .btn-vote:hover { color: var(--accent); text-shadow: 0 0 10px var(--accent); }
        
        .btn-login {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white; padding: 10px 25px; border-radius: 12px; text-decoration: none; font-weight: 700;
            transition: 0.3s;
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.3); display: flex; align-items: center; gap: 8px; border: 1px solid rgba(255,255,255,0.2); white-space: nowrap;
        }
        .btn-login:hover { transform: translateY(-2px); box-shadow: 0 5px 25px rgba(168, 85, 247, 0.5); }

        .hamburger { display: none; font-size: 1.8rem; color: white; cursor: pointer; z-index: 1003; justify-self: end; }

        .nav-menu {
            display: none; position: fixed; top: 0; right: -100%; width: 70%; height: 100vh;
            background: rgba(10, 10, 20, 0.95); backdrop-filter: blur(20px);
            flex-direction: column; justify-content: center; align-items: center;
            transition: 0.4s ease-in-out; border-left: 1px solid var(--border);
            z-index: 1002; padding: 50px 0;
        }
        .nav-menu.active { right: 0; display: flex; }
        .mobile-links { display: flex; flex-direction: column; gap: 20px; }
        .mobile-actions { display: flex; flex-direction: column; gap: 15px; margin-top: 20px; }

        /* --- HERO --- */
        .hero { min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 120px 20px 80px; position: relative; }
        .hero h1 {
            font-size: 5.5rem; line-height: 1.1; font-weight: 900;
            background: linear-gradient(to bottom right, #fff 30%, var(--primary), var(--accent));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            margin-bottom: 25px; animation: fadeInUp 1s ease-out;
            filter: drop-shadow(0 0 30px rgba(99, 102, 241, 0.3));
        }
        .hero p { font-size: 1.4rem; color: var(--text-muted); max-width: 750px; margin-bottom: 50px; animation: fadeInUp 1.2s ease-out; line-height: 1.6; }
        .cta-group { display: flex; gap: 25px; animation: fadeInUp 1.4s ease-out; }
        .btn-hero { padding: 18px 45px; border-radius: 16px; font-weight: 700; font-size: 1.1rem; text-decoration: none; color: white; transition: 0.3s; display: flex; align-items: center; gap: 12px; border: 1px solid rgba(255,255,255,0.1); }
        .btn-primary { background: var(--primary); box-shadow: 0 0 30px rgba(99, 102, 241, 0.4); }
        .btn-primary:hover { background: var(--primary-hover); transform: translateY(-5px); box-shadow: 0 10px 40px rgba(99, 102, 241, 0.6); }
        .btn-glass { background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); }
        .btn-glass:hover { background: rgba(255,255,255,0.1); transform: translateY(-5px); }

        /* --- FEATURES --- */
        .features { max-width: 1600px; margin: 0 auto; padding: 100px 5%; }
        .section-header { text-align: center; margin-bottom: 70px; }
        .section-header h2 { font-size: 3.5rem; font-weight: 800; margin-bottom: 15px; }
        .section-header span { background: linear-gradient(to right, var(--secondary), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 25px; }
        .card {
            background: linear-gradient(145deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.01) 100%);
            border: 1px solid var(--border); padding: 35px 25px; border-radius: 24px;
            position: relative; transition: 0.4s; overflow: hidden; height: 100%; display: flex; flex-direction: column;
        }
        .card::after {
            content: ''; position: absolute; inset: 0; border-radius: 24px; padding: 2px;
            background: linear-gradient(45deg, transparent, var(--primary), transparent);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0); -webkit-mask-composite: xor; mask-composite: exclude; opacity: 0; transition: 0.4s;
        }
        .card:hover { transform: translateY(-10px); background: rgba(255,255,255,0.05); border-color: var(--primary); }
        .card:hover::after { opacity: 1; }
        .icon-box { width: 60px; height: 60px; border-radius: 18px; background: rgba(255, 255, 255, 0.05); display: flex; align-items: center; justify-content: center; font-size: 1.8rem; color: var(--primary); margin-bottom: 20px; transition: 0.4s; }
        .card:hover .icon-box { background: var(--primary); color: white; box-shadow: 0 0 30px var(--primary); transform: rotate(10deg); }
        .card h3 { font-size: 1.4rem; margin-bottom: 10px; font-weight: 700; }
        .card p { color: var(--text-muted); font-size: 0.95rem; line-height: 1.6; }

        /* --- COMMANDS --- */
        .commands-section { padding: 100px 5%; background: rgba(0,0,0,0.2); border-top: 1px solid var(--border); border-bottom: 1px solid var(--border); }
        .cmd-container { max-width: 1200px; margin: 0 auto; display: flex; gap: 40px; min-height: 500px; }
        .cmd-tabs { flex: 1; display: flex; flex-direction: column; gap: 10px; min-width: 250px; }
        .tab-btn { background: transparent; border: 1px solid var(--border); color: var(--text-muted); padding: 15px 25px; text-align: left; border-radius: 12px; cursor: pointer; font-size: 1.1rem; font-weight: 600; transition: 0.3s; display: flex; justify-content: space-between; align-items: center; font-family: 'Outfit', sans-serif; }
        .tab-btn:hover { background: rgba(255,255,255,0.05); color: white; padding-left: 30px; }
        .tab-btn.active { background: linear-gradient(90deg, var(--primary), transparent); border-color: var(--primary); color: white; padding-left: 30px; box-shadow: 0 5px 15px rgba(99, 102, 241, 0.2); }
        .cmd-content { flex: 3; background: var(--card-bg); border: 1px solid var(--border); border-radius: 20px; padding: 30px; }
        .cmd-group { display: none; animation: fadeIn 0.4s ease; }
        .cmd-group.active { display: block; }
        .cmd-item { display: flex; justify-content: space-between; align-items: center; padding: 15px; border-bottom: 1px solid var(--border); transition: 0.2s; }
        .cmd-item:hover { background: rgba(255,255,255,0.02); padding-left: 20px; }
        .cmd-name { font-family: 'Courier New', monospace; color: var(--accent); font-weight: 700; font-size: 1.1rem; }
        .cmd-desc { color: var(--text-muted); font-size: 0.95rem; text-align: right; }

        /* --- STATS --- */
        .stats-wrapper { padding: 100px 0; border-bottom: 1px solid var(--border); }
        .stats-container { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-around; flex-wrap: wrap; gap: 50px; text-align: center; }
        .stat-item h2 { font-size: 4rem; font-weight: 900; margin-bottom: 5px; text-shadow: 0 0 30px rgba(255,255,255,0.1); }
        .stat-item p { color: var(--accent); font-weight: 700; text-transform: uppercase; letter-spacing: 3px; }

        /* --- FAQ & ADMIN CONTROLS --- */
        .faq { max-width: 1200px; margin: 0 auto; padding: 100px 20px; }
        .faq-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 30px; }
        .faq-item { background: rgba(255,255,255,0.02); border: 1px solid var(--border); border-radius: 16px; padding: 25px; transition: 0.3s; height: 100%; display: flex; flex-direction: column; }
        .faq-item:hover { border-color: var(--primary); background: rgba(99, 102, 241, 0.05); transform: translateY(-5px); }
        .faq-item h4 { color: #fff; margin-bottom: 15px; display: flex; align-items: center; gap: 12px; font-size: 1.2rem; }
        .faq-item h4 i { color: var(--success); }
        .faq-item p { color: var(--text-muted); line-height: 1.6; flex-grow: 1; }

        /* Admin Controls */
        .admin-controls { display: flex; gap: 10px; margin-top: 20px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); }
        .btn-edit, .btn-save { padding: 8px 15px; border-radius: 8px; font-size: 0.85rem; cursor: pointer; border: none; font-weight: 700; transition: 0.2s; font-family: 'Outfit', sans-serif; display: flex; align-items: center; gap: 6px; }
        .btn-edit { background: rgba(255,255,255,0.08); color: var(--text-muted); }
        .btn-edit:hover { background: var(--primary); color: white; }
        .btn-save { background: var(--success); color: white; display: none; }
        .btn-save:hover { background: #059669; }

        /* Edit Modal */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); backdrop-filter: blur(8px); z-index: 2000; justify-content: center; align-items: center; animation: fadeIn 0.2s ease; }
        .modal-box { background: #15161b; padding: 40px; border-radius: 24px; width: 90%; max-width: 500px; border: 1px solid var(--border); box-shadow: 0 0 50px rgba(99, 102, 241, 0.2); }
        .modal-header { font-size: 1.5rem; font-weight: 700; margin-bottom: 25px; color: white; display: flex; align-items: center; gap: 10px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; color: var(--text-muted); margin-bottom: 8px; font-size: 0.9rem; font-weight: 500; }
        .form-control { width: 100%; padding: 14px; background: rgba(0,0,0,0.4); border: 1px solid var(--border); border-radius: 12px; color: white; font-family: 'Outfit', sans-serif; transition: 0.3s; }
        .form-control:focus { border-color: var(--primary); outline: none; background: rgba(99, 102, 241, 0.05); }
        .modal-actions { display: flex; gap: 12px; justify-content: flex-end; margin-top: 30px; }
        .btn-cancel { background: transparent; border: 1px solid var(--border); color: var(--text-muted); }
        .btn-cancel:hover { background: rgba(255,255,255,0.05); color: white; }

        /* --- FOOTER --- */
        footer { background: #02000d; border-top: 1px solid var(--border); padding: 80px 5% 30px; margin-top: auto; }
        .footer-content { max-width: 1400px; margin: 0 auto; display: grid; grid-template-columns: 1.5fr 1fr 1fr 1fr; gap: 50px; margin-bottom: 60px; }
        .footer-brand p { color: var(--text-muted); margin-top: 20px; line-height: 1.7; }
        .footer-col h4 { font-size: 1.1rem; margin-bottom: 25px; color: white; text-transform: uppercase; letter-spacing: 1px; }
        .footer-col ul { list-style: none; }
        .footer-col ul li { margin-bottom: 15px; }
        .footer-col ul li a { color: var(--text-muted); text-decoration: none; transition: 0.3s; }
        .footer-col ul li a:hover { color: var(--primary); }
        .copyright { text-align: center; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 30px; color: var(--text-muted); font-size: 0.9rem; }

        /* --- RESPONSIVE --- */
        @media (max-width: 1200px) { .grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 992px) {
            .hero h1 { font-size: 3.5rem; }
            nav { display: flex; justify-content: space-between; } 
            .nav-center, .nav-actions { display: none; } 
            .hamburger { display: block; }
            .cmd-container { flex-direction: column; }
            .footer-content { grid-template-columns: 1fr; text-align: center; }
            .faq-grid { grid-template-columns: 1fr; }
        }
        @media (max-width: 600px) { .grid { grid-template-columns: 1fr; } .hero h1 { font-size: 2.8rem; } }

        @keyframes floatBlob { 0% { transform: translate(0, 0); } 100% { transform: translate(50px, 50px); } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse { 0% { opacity: 0.1; transform: scale(1); } 50% { opacity: 0.2; transform: scale(1.1); } 100% { opacity: 0.1; transform: scale(1); } }

        /* --- SCROLLBAR --- */
        ::-webkit-scrollbar { width: 8px; background-color: var(--bg); }
        ::-webkit-scrollbar-thumb { background-color: var(--primary); border-radius: 10px; border: 2px solid var(--bg); }
        ::-webkit-scrollbar-track { background-color: var(--surface); }

    </style>
</head>
<body>

    <canvas id="particles"></canvas>
    <div class="blob blob-1"></div>
    <div class="blob blob-2"></div>
    <div class="blob blob-3"></div>

    <nav>
        <a href="/" class="logo"><img src="<%= user.displayAvatarURL() %>" alt="Logo"><%= user.username %></a>
        
        <div class="hamburger" onclick="toggleMenu()"><i class="fa-solid fa-bars"></i></div>

        <div class="nav-center">
            <a href="#features" class="nav-link">Features</a>
            <a href="#commands" class="nav-link">Commands</a>
            <a href="#stats" class="nav-link">Stats</a>
            <a href="#faq" class="nav-link">FAQ</a>
        </div>

        <div class="nav-actions">
            <a href="#" class="btn-vote"><i class="fa-solid fa-heart"></i> Vote</a>
            <a href="https://discord.gg/qdHMbvtAVd" class="btn-vote"><i class="fa-brands fa-discord"></i> Support</a>
            <a href="/auth/login" class="btn-login"><i class="fa-solid fa-right-to-bracket"></i> Login</a>
        </div>

        <div class="nav-menu" id="navMenu">
            <div class="mobile-links">
                <a href="#features" class="nav-link" onclick="toggleMenu()">Features</a>
                <a href="#commands" class="nav-link" onclick="toggleMenu()">Commands</a>
                <a href="#stats" class="nav-link" onclick="toggleMenu()">Stats</a>
                <a href="#faq" class="nav-link" onclick="toggleMenu()">FAQ</a>
            </div>
            <div class="mobile-actions">
                <a href="#" class="btn-vote"><i class="fa-solid fa-heart"></i> Vote</a>
                <a href="#" class="btn-vote"><i class="fa-brands fa-discord"></i> Support</a>
                <a href="/auth/login" class="btn-login"><i class="fa-solid fa-right-to-bracket"></i> Login</a>
            </div>
        </div>
    </nav>

    <section class="hero">
        <h1>Server Management<br>Reimagined</h1>
        <p>Experience the future of Discord communities. Automated moderation, engaging economy, and seamless support systems.</p>
        <div class="cta-group">
            <a href="<%= invite %>" target="_blank" class="btn-hero btn-primary"><i class="fa-solid fa-robot"></i> Add to Discord</a>
            <a href="#features" class="btn-hero btn-glass"><i class="fa-solid fa-layer-group"></i> Explore Features</a>
        </div>
    </section>

    <section class="features" id="features">
        <div class="section-header"><h2>Everything You <span>Need</span></h2><p style="color: var(--text-muted);">Powerful modules packed into one bot.</p></div>
        <div class="grid">
            <div class="card"><div class="icon-box"><i class="fa-solid fa-ticket"></i></div><h3>Ticket System</h3><p>Support tickets with transcripts & anonymous mode.</p></div>
            <div class="card"><div class="icon-box"><i class="fa-solid fa-id-badge"></i></div><h3>Registration</h3><p>Secure entry with captcha verification & auto-roles.</p></div>
            <div class="card"><div class="icon-box"><i class="fa-solid fa-shield-halved"></i></div><h3>Moderation</h3><p>Ban, Kick, Timeout, and Jail with logs.</p></div>
            <div class="card"><div class="icon-box"><i class="fa-solid fa-file-lines"></i></div><h3>Logs</h3><p>Track message edits, voice activity, and roles.</p></div>
            <div class="card"><div class="icon-box"><i class="fa-solid fa-coins"></i></div><h3>Economy</h3><p>Currency system, Blackjack, Slots & Shop.</p></div>
            <div class="card"><div class="icon-box"><i class="fa-solid fa-chart-line"></i></div><h3>Leveling</h3><p>XP progression, rank cards & role rewards.</p></div>
            <div class="card"><div class="icon-box"><i class="fa-solid fa-gift"></i></div><h3>Giveaways</h3><p>Automatic giveaways with reroll functionality.</p></div>
            <div class="card"><div class="icon-box"><i class="fa-solid fa-microphone"></i></div><h3>JTC Voice</h3><p>User-managed temporary voice channels.</p></div>
        </div>
    </section>

    <section class="commands-section" id="commands">
        <div class="section-header"><h2>Bot <span>Commands</span></h2><p style="color: var(--text-muted);">Explore the toolkit.</p></div>
        <div class="cmd-container">
            <div class="cmd-tabs">
                <div class="tab-btn active" onclick="openTab(event, 'mod')">üõ°Ô∏è Moderation <i class="fa-solid fa-chevron-right"></i></div>
                <div class="tab-btn" onclick="openTab(event, 'eco')">üí∞ Economy <i class="fa-solid fa-chevron-right"></i></div>
                <div class="tab-btn" onclick="openTab(event, 'level')">üìà Levels <i class="fa-solid fa-chevron-right"></i></div>
                <div class="tab-btn" onclick="openTab(event, 'ticket')">üé´ Tickets <i class="fa-solid fa-chevron-right"></i></div>
                <div class="tab-btn" onclick="openTab(event, 'util')">‚öôÔ∏è Utility <i class="fa-solid fa-chevron-right"></i></div>
            </div>
            <div class="cmd-content">
                <div id="mod" class="cmd-group active">
                    <div class="cmd-item"><span class="cmd-name">/ban</span><span class="cmd-desc">Permanently ban a user.</span></div>
                    <div class="cmd-item"><span class="cmd-name">/kick</span><span class="cmd-desc">Kick a user from the server.</span></div>
                    <div class="cmd-item"><span class="cmd-name">/timeout</span><span class="cmd-desc">Timeout a user.</span></div>
                    <div class="cmd-item"><span class="cmd-name">/jail</span><span class="cmd-desc">Restrict a user to jail.</span></div>
                    <div class="cmd-item"><span class="cmd-name">/clear</span><span class="cmd-desc">Delete bulk messages.</span></div>
                </div>
                <div id="eco" class="cmd-group">
                    <div class="cmd-item"><span class="cmd-name">/daily</span><span class="cmd-desc">Claim daily reward.</span></div>
                    <div class="cmd-item"><span class="cmd-name">/balance</span><span class="cmd-desc">Check wallet balance.</span></div>
                    <div class="cmd-item"><span class="cmd-name">/coinflip</span><span class="cmd-desc">Gamble on heads/tails.</span></div>
                    <div class="cmd-item"><span class="cmd-name">/slots</span><span class="cmd-desc">Play slot machine.</span></div>
                    <div class="cmd-item"><span class="cmd-name">/blackjack</span><span class="cmd-desc">Play blackjack.</span></div>
                </div>
                <div id="level" class="cmd-group">
                    <div class="cmd-item"><span class="cmd-name">/level</span><span class="cmd-desc">View your rank card.</span></div>
                    <div class="cmd-item"><span class="cmd-name">/leaderboard</span><span class="cmd-desc">See top users.</span></div>
                </div>
                <div id="ticket" class="cmd-group">
                    <div class="cmd-item"><span class="cmd-name">/ticket-setup</span><span class="cmd-desc">Setup ticket panel.</span></div>
                    <div class="cmd-item"><span class="cmd-name">/ticket-close</span><span class="cmd-desc">Close current ticket.</span></div>
                </div>
                <div id="util" class="cmd-group">
                    <div class="cmd-item"><span class="cmd-name">/logs-setup</span><span class="cmd-desc">Configure logs.</span></div>
                    <div class="cmd-item"><span class="cmd-name">/regist-setup</span><span class="cmd-desc">Setup registration.</span></div>
                    <div class="cmd-item"><span class="cmd-name">/afk</span><span class="cmd-desc">Set AFK status.</span></div>
                    <div class="cmd-item"><span class="cmd-name">/botinfo</span><span class="cmd-desc">View bot stats.</span></div>
                </div>
            </div>
        </div>
    </section>

    <section class="stats-wrapper" id="stats">
        <div class="stats-container">
            <div class="stat-item"><h2><%= stats.servers %></h2><p>Active Servers</p></div>
            <div class="stat-item"><h2><%= stats.members.toLocaleString() %></h2><p>Happy Users</p></div>
            <div class="stat-item"><h2><%= stats.channels.toLocaleString() %></h2><p>Channels</p></div>
        </div>
    </section>

    <section class="faq" id="faq">
        <div class="section-header"><h2>Common <span>Questions</span></h2></div>
        
        <div class="faq-grid" id="faqGrid">
            <% faqItems.forEach((item, index) => { %>
                <div class="faq-item" id="card-<%= index %>" data-db-id="<%= item._id %>">
                    <h4 class="card-question">
                        <i class="<%= item.icon || 'fa-solid fa-circle-check' %> card-icon-el"></i> 
                        <span class="card-title-text"><%= item.question %></span>
                    </h4>
                    <p class="card-answer"><%- item.answer %></p>

                    <% if (typeof isGeneralAdmin !== 'undefined' && isGeneralAdmin) { %>
                        <div class="admin-controls">
                            <button class="btn-edit" onclick="openEditModal(<%= index %>)">
                                <i class="fa-solid fa-pen"></i> Edit
                            </button>
                            <button class="btn-save" id="save-btn-<%= index %>" onclick="saveCardToDB(<%= index %>)">
                                <i class="fa-solid fa-floppy-disk"></i> Save Changes
                            </button>
                        </div>
                    <% } %>
                </div>
            <% }) %>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            <div class="footer-col footer-brand"><a href="#" class="logo"><img src="<%= user.displayAvatarURL() %>" alt="Logo"><%= user.username %></a><p>Building the next generation of Discord communities.</p></div>
            <div class="footer-col"><h4>Platform</h4><ul><li><a href="#features">Features</a></li><li><a href="<%= invite %>">Add to Server</a></li><li><a href="#">Dashboard</a></li></ul></div>
            <div class="footer-col"><h4>Community</h4><ul><li><a href="#">Support Server</a></li><li><a href="#">Vote for Us</a></li></ul></div>
            <div class="footer-col"><h4>Legal</h4><ul><li><a href="#">Terms</a></li><li><a href="#">Privacy</a></li></ul></div>
        </div>
        <div class="copyright"><p>&copy; 2025 <%= user.username %>. All rights reserved.</p></div>
    </footer>

    <div class="modal-overlay" id="editModal">
        <div class="modal-box">
            <div class="modal-header"><i class="fa-solid fa-pen-to-square"></i> Edit Content</div>
            <input type="hidden" id="editIndex">
            
            <div class="form-group">
                <label>Icon Class (FontAwesome)</label>
                <input type="text" id="editIcon" class="form-control" placeholder="fa-solid fa-circle-check">
            </div>
            
            <div class="form-group">
                <label>Title (Question)</label>
                <input type="text" id="editQuestion" class="form-control">
            </div>
            
            <div class="form-group">
                <label>Content (Answer)</label>
                <textarea id="editAnswer" class="form-control" rows="5"></textarea>
            </div>

            <div class="modal-actions">
                <button class="btn-edit btn-cancel" onclick="closeModal()">Cancel</button>
                <button class="btn-login" onclick="applyChanges()" style="border:none; cursor:pointer;">OK (Preview)</button>
            </div>
        </div>
    </div>

    <script>
        // Mobil men√º
        function toggleMenu() { 
            const menu = document.getElementById('navMenu'); menu.classList.toggle('active'); 
        }

        // Sekmeler
        function openTab(evt, tabName) {
            var i, x, tablinks;
            x = document.getElementsByClassName("cmd-group"); for (i = 0; i < x.length; i++) { x[i].style.display = "none"; x[i].classList.remove("active"); }
            tablinks = document.getElementsByClassName("tab-btn"); for (i = 0; i < x.length; i++) { tablinks[i].classList.remove("active"); }
            document.getElementById(tabName).style.display = "block"; setTimeout(() => document.getElementById(tabName).classList.add("active"), 10);
            evt.currentTarget.classList.add("active");
        }

        // --- üü¢ ADMIN EDIT SCRIPT ---
        
        // Modal A√ß
        function openEditModal(index) {
            const card = document.getElementById(`card-${index}`);
            const icon = card.querySelector('.card-icon-el').className;
            const title = card.querySelector('.card-title-text').innerText;
            const answer = card.querySelector('.card-answer').innerHTML;

            document.getElementById('editIndex').value = index;
            document.getElementById('editIcon').value = icon;
            document.getElementById('editQuestion').value = title;
            document.getElementById('editAnswer').value = answer;

            document.getElementById('editModal').style.display = 'flex';
        }

        // Modal Kapat
        function closeModal() {
            document.getElementById('editModal').style.display = 'none';
        }

        // Deƒüi≈üiklikleri √ñnizle (OK Butonu)
        function applyChanges() {
            const index = document.getElementById('editIndex').value;
            const newIcon = document.getElementById('editIcon').value;
            const newTitle = document.getElementById('editQuestion').value;
            const newAnswer = document.getElementById('editAnswer').value;

            // Kartƒ± G√ºncelle (Frontend)
            const card = document.getElementById(`card-${index}`);
            card.querySelector('.card-icon-el').className = newIcon;
            card.querySelector('.card-title-text').innerText = newTitle;
            card.querySelector('.card-answer').innerHTML = newAnswer;

            // Kaydet Butonunu G√∂ster
            const saveBtn = document.getElementById(`save-btn-${index}`);
            saveBtn.style.display = 'inline-flex';
            saveBtn.innerHTML = '<i class="fa-solid fa-floppy-disk"></i> Save (Unsaved)';
            saveBtn.style.background = '#eab308'; // Sarƒ± (Kaydedilmedi)
            
            closeModal();
        }

        // Veritabanƒ±na Kaydet (Save Butonu)
        async function saveCardToDB(index) {
            const card = document.getElementById(`card-${index}`);
            const dbId = card.getAttribute('data-db-id');
            const saveBtn = document.getElementById(`save-btn-${index}`);

            const data = {
                id: dbId,
                icon: card.querySelector('.card-icon-el').className,
                question: card.querySelector('.card-title-text').innerText,
                answer: card.querySelector('.card-answer').innerHTML,
                order: index + 1
            };

            saveBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Saving...';

            try {
                // Main.js'teki yeni √∂zel rotaya istek atƒ±yoruz
                const response = await fetch('/update-faq', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (result.success) {
                    saveBtn.style.background = 'var(--success)';
                    saveBtn.innerHTML = '<i class="fa-solid fa-check"></i> Saved!';
                    
                    if (result.id) card.setAttribute('data-db-id', result.id);
                    
                    setTimeout(() => { saveBtn.style.display = 'none'; }, 2000);
                } else {
                    alert('Error saving: ' + (result.error || 'Unknown error'));
                    saveBtn.innerHTML = 'Error';
                    saveBtn.style.background = '#ef4444';
                }
            } catch (err) {
                console.error(err);
                alert('Connection error!');
                saveBtn.innerHTML = 'Error';
            }
        }

        // Particles
        const canvas = document.getElementById('particles'); const ctx = canvas.getContext('2d'); canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        let particlesArray; class Particle { constructor() { this.x = Math.random() * canvas.width; this.y = Math.random() * canvas.height; this.size = Math.random() * 2; this.speedX = (Math.random() * 0.5) - 0.25; this.speedY = (Math.random() * 0.5) - 0.25; this.color = Math.random() > 0.5 ? '#6366f1' : '#ec4899'; } update() { this.x += this.speedX; this.y += this.speedY; if (this.size > 0.2) this.size -= 0.01; if (this.x < 0 || this.x > canvas.width) this.speedX *= -1; if (this.y < 0 || this.y > canvas.height) this.speedY *= -1; } draw() { ctx.fillStyle = this.color; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill(); } } function init() { particlesArray = []; for (let i=0; i<80; i++) particlesArray.push(new Particle()); } function animate() { ctx.clearRect(0, 0, canvas.width, canvas.height); for (let i=0; i<particlesArray.length; i++) { particlesArray[i].update(); particlesArray[i].draw(); if (particlesArray[i].size <= 0.3) { particlesArray.splice(i, 1); particlesArray.push(new Particle()); } } requestAnimationFrame(animate); } window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }); init(); animate();
    </script>
</body>
</html>